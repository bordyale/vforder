<?xml version="1.0" encoding="UTF-8"?>
<site-conf xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://ofbiz.apache.org/Site-Conf" xsi:schemaLocation="http://ofbiz.apache.org/Site-Conf http://ofbiz.apache.org/dtds/site-conf.xsd">
    <!-- The controller elements that are common to all OFBiz components
         can be found in the following xml file. A component can override the
         elements found in the common-controller.xml file. -->
    <include location="component://common/webcommon/WEB-INF/common-controller.xml"/>

    <description>Vforder Component Site Configuration File</description>

    <!-- Events to run on every request before security (chains exempt) -->
    <!--
    <preprocessor>
    </preprocessor>
    -->
    <!-- Events to run on every request after all other processing (chains exempt) -->
    <!--
    <postprocessor>
        <event name="test" type="java" path="org.apache.ofbiz.webapp.event.TestEvent" invoke="test"/>
    </postprocessor>
    -->

    <!-- Request Mappings -->
    <request-map uri="main"><security https="true" auth="true"/><response name="success" type="view" value="main"/></request-map>
    <request-map uri="findorders">
        <security https="true" auth="true"/>
        <response name="success" type="view" value="findorders"/>
    </request-map>
    <request-map uri="searchorders">
        <security https="true" auth="true"/>
        <event type="service" invoke="findOrders"/>
        <response name="success" type="view" value="findorders"/>
        <response name="error" type="view" value="findorders"/>
    </request-map>
        <!-- Order Entry Requests -->
    <request-map uri="orderentry">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="routeOrderEntry"/>
        <response name="init" type="view" value="checkinits"/>
        <response name="agreements" type="view" value="orderagreements"/>
        <response name="cart" type="view" value="showcart"/>
        <response name="error" type="view" value="checkinits"/>
    </request-map>
    <request-map uri="initorderentry">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="initializeOrderEntry"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="error" type="view" value="checkinits"/>
    </request-map>
    <request-map uri="checkinits">
        <security https="true" auth="true"/>
        <response name="success" type="view" value="checkinits"/>
    </request-map>
    <request-map uri="orderagreements">
        <security https="true" auth="true"/>
        <response name="success" type="view" value="orderagreements"/>
    </request-map>
    <request-map uri="setOrderCurrencyAgreementShipDates">
        <description>Handles setting the currency, agreement and shipment dates of an order.</description>
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="setOrderCurrencyAgreementShipDates"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="error" type="request" value="orderagreements"/>
    </request-map>
    <request-map uri="setOrderAgreement">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="selectAgreement"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="error" type="request" value="orderagreements"/>
    </request-map>
    <request-map uri="setOrderCurrency">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="setCurrency"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="error" type="request" value="orderagreements"/>
    </request-map>
    <request-map uri="setOrderName">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="setOrderName"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="error" type="request" value="orderentry"/>
    </request-map>
    <request-map uri="setPoNumber">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="setPoNumber"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="error" type="request" value="orderentry"/>
    </request-map>

    <request-map uri="additem">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="addToCart"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="survey" type="view" value="survey"/>
        <response name="product" type="view" value="product"/>
        <response name="error" type="request" value="orderentry"/>
    </request-map>
    <request-map uri="loadCartFromOrder">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="loadCartFromOrder"/>
        <response name="success" type="request" value="finalizeOrder"/>
        <response name="error" type="view" value="orderview"/>
    </request-map>
    <request-map uri="getProductInventoryAvailable">
        <security https="true" auth="true"/>
        <event type="service" invoke="getInventoryAvailableByFacility"/>
        <response name="success" type="view" value="showcart"/>
        <response name="error" type="view" value="showcart"/>
    </request-map>
    <request-map uri="emptycart">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="destroyCart"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="error" type="request" value="orderentry"/>
    </request-map>
    <request-map uri="modifycart">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="modifyCart"/>
        <response name="success" type="request" value="orderentry"/>
        <response name="error" type="request" value="orderentry"/>
    </request-map>
    <request-map uri="finalizeOrder">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.CheckOutEvents" invoke="finalizeOrderEntry"/>
        <response name="addparty" type="view" value="setAdditionalParty"/>
        <response name="customer" type="view" value="custsetting"/>
        <response name="shipping" type="view" value="confirm"/>
        <response name="shippingAddress" type="view" value="EditShipAddress"/>
        <response name="options" type="view" value="optionsetting"/>
        <response name="payment" type="request" value="calcShippingBeforePayment"/>
        <response name="paymentError" type="request" value="calcShippingBeforePayment"/>
        <response name="term" type="view" value="confirm"/>
        <response name="shipGroups" type="view" value="SetItemShipGroups"/>
        <response name="sales" type="request" value="calcShipping"/>
        <response name="po" type="request" value="calcTax"/>
        <response name="error" type="request" value="orderentry"/>
    </request-map>
    <request-map uri="processorder">
        <security https="true" auth="true"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.CheckOutEvents" invoke="createOrder"/>
        <response name="sales_order" type="request" value="checkBlackList"/>
        <response name="work_order" type="request" value="checkBlackList"/>
        <response name="purchase_order" type="request" value="clearpocart"/>
        <response name="error" type="view" value="confirm"/>
    </request-map>
    <request-map uri="confirmOrder">
        <security https="true" auth="true"/>
        <response name="success" type="view" value="confirm"/>
    </request-map>
    <request-map uri="clearpocart">
        <security https="true" direct-request="false"/>
        <event type="java" path="org.apache.ofbiz.order.shoppingcart.ShoppingCartEvents" invoke="destroyCart"/>
        <response name="success" type="view" value="ordercomplete"/>
        <response name="error" type="view" value="confirm"/>
    </request-map>
    
    
    
    
    
    <request-map uri="LookupUserLoginAndPartyDetails"><security https="true" auth="true"/><response name="success" type="view" value="LookupUserLoginAndPartyDetails"/></request-map>
   <request-map uri="LookupProduct"><security https="true" auth="true"/><response name="success" type="view" value="LookupProduct"/></request-map>
   <request-map uri="LookupSupplierProduct"><security https="true" auth="true"/><response name="success" type="view" value="LookupSupplierProduct"/></request-map>
    
    
    
    
    <!-- View Mappings -->
    <view-map name="main" type="screen" page="component://vforder/widget/VforderScreens.xml#main"/>
    <view-map name="findorders" type="screen" page="component://vforder/widget/VforderScreens.xml#OrderFindOrder"/>
    <view-map name="checkinits" type="screen" page="component://vforder/widget/VforderScreens.xml#CheckInits"/>
    <view-map name="LookupUserLoginAndPartyDetails" type="screen" page="component://party/widget/partymgr/LookupScreens.xml#LookupUserLoginAndPartyDetails"/>
    <view-map name="showcart" type="screen" page="component://vforder/widget/VforderScreens.xml#ShowCart"/>
    <view-map name="orderagreements" type="screen" page="component://vforder/widget/VforderScreens.xml#OrderAgreements"/>
    <view-map name="LookupProduct" type="screen" page="component://product/widget/catalog/LookupScreens.xml#LookupProduct"/>
    <view-map name="LookupSupplierProduct" type="screen" page="component://product/widget/catalog/LookupScreens.xml#LookupSupplierProduct"/>
    <view-map name="confirm" type="screen" page="component://order/widget/ordermgr/OrderEntryOrderScreens.xml#ConfirmOrder"/>
    <view-map name="shipsetting" type="screen" page="component://order/widget/ordermgr/OrderEntryOrderScreens.xml#ShipSettings"/>
    <view-map name="ordercomplete" type="screen" page="component://order/widget/ordermgr/OrderViewScreens.xml#OrderHeaderView"/>
</site-conf>