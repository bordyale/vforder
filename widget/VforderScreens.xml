<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://ofbiz.apache.org/Widget-Screen" xsi:schemaLocation="http://ofbiz.apache.org/Widget-Screen http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="main">
        <section>
            <actions>
                <set field="headerItem" value="main"/><!-- this highlights the selected menu-item with name "main" -->
            </actions>
            <widgets>
                <decorator-screen name="VforderCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="CommonOrderViewDecorator">
        <section>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <decorator-section-include name="body"/>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CommonOrderEntryDecorator">
        <section>
            <actions>
                <set field="headerItem" value="orderentry"/>
                <script location="component://order/groovyScripts/entry/SetShoppingCart.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                   <!--  <decorator-section name="left-column">
                        <include-screen name="leftbar"/>
                    </decorator-section> -->
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <platform-specific>
                                    <html><html-template location="component://order/template/entry/OrderEntryTabBar.ftl"/></html>
                                </platform-specific>
                                <decorator-section-include name="body"/>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CommonOrderCheckoutDecorator">
        <section>
            <actions>
                <set field="headerItem" value="orderentry"/>
                <script location="component://order/groovyScripts/entry/SetShoppingCart.groovy"/>
                <script location="component://vforder/groovyScripts/SetCheckOutTabBar.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <platform-specific>
                                    <html><html-template location="component://vforder/template/OrderEntryCheckOutTabBar.ftl"/></html>
                                </platform-specific>
                                <decorator-section-include name="body"/>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="OrderFindOrder">
        <section>
            <actions>
                <set field="titleProperty" value="OrderFindOrder"/>
                <set field="headerItem" value="findorders"/>
                <script location="component://order/groovyScripts/order/FindOrders.groovy"/>
                <script location="component://content/groovyScripts/print/FindPrinters.groovy"/>

                <!-- asmselect parameters, must be prefixed by asm_ for SetMultipleSelectJs.ftl -->
                <set field="asm_multipleSelectForm"  value="lookuporder"/>
                <set field="asm_multipleSelect"  value="roleTypeId"/>
                <set field="asm_formSize" value="1000"/>
                <set field="asm_asmListItemPercentOfForm" value="95"/>
                <set field="asm_sortable" value="false"/>
                <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="asm_title" value="${uiLabelMap.OrderPartySelectRoleForParty}"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonOrderViewDecorator">
                    <decorator-section name="body">
                        <platform-specific><html><html-template location="component://common/template/includes/SetMultipleSelectJs.ftl"/></html></platform-specific>
                        <platform-specific>
                            <html><html-template location="component://order/template/order/FindOrders.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CheckInits">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleOrderInits"/>
                <set field="headerItem" value="orderentry"/>
                <script location="component://order/groovyScripts/entry/CheckInits.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <platform-specific><html><html-template location="component://order/template/entry/CheckInits.ftl"/></html></platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ShowCart">
        <section>
            <actions>
            	<set field="headerItem" value="orderentry"/>
                <set field="titleProperty" value="PageTitleOrderShowCart"/>
                <set field="productsummaryScreen" value="component://order/widget/ordermgr/OrderEntryCatalogScreens.xml#productsummary"/>
                <property-to-field resource="order" property="orderPreference.giftEnable" field="giftEnable" default="Y"/>
                <set field="promoUseDetailsInlineScreen" value="component://order/widget/ordermgr/OrderEntryCartScreens.xml#promoUseDetailsInline"/>
                <script location="component://order/groovyScripts/entry/ShowCart.groovy"/>
                <script location="component://order/groovyScripts/entry/ShowPromoText.groovy"/>
                <entity-condition entity-name="ProductStorePromoAndAppl" list="allProductPromos" filter-by-date="true">
                    <condition-list combine="and">
                        <condition-expr field-name="manualOnly" value="Y"/>
                        <condition-expr field-name="productStoreId" from-field="productStoreId"/>
                    </condition-list>
                    <order-by field-name="productPromoId"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="CommonOrderEntryDecorator">
                    <decorator-section name="body">
                        <platform-specific><html><html-template location="component://order/template/entry/cart/Javascript.ftl"/></html></platform-specific>
                        <platform-specific><html><html-template location="component://order/template/entry/cart/ShowCart.ftl"/></html></platform-specific>
                        <!-- <platform-specific><html><html-template location="component://order/template/entry/cart/AddItemsToShoppingList.ftl"/></html></platform-specific> -->
                        <platform-specific><html><html-template location="component://order/template/entry/cart/ShowCartItems.ftl"/></html></platform-specific>
                        <!-- <platform-specific><html><html-template location="component://order/template/entry/cart/PromoCodes.ftl"/></html></platform-specific> -->
                        <!-- <platform-specific><html><html-template location="component://order/template/entry/cart/ManualPromotions.ftl"/></html></platform-specific> -->
                        <!-- <platform-specific><html><html-template location="component://order/template/entry/cart/PromoText.ftl"/></html></platform-specific> -->
                        <!-- <platform-specific><html><html-template location="component://order/template/entry/cart/AssociatedProducts.ftl"/></html></platform-specific> -->
                        <!-- <platform-specific><html><html-template location="component://order/template/entry/cart/PromotionsApplied.ftl"/></html></platform-specific> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="OrderAgreements">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleOrderAgreements"/>
                <set field="headerItem" value="orderentry"/>
                <script location="component://order/groovyScripts/entry/OrderAgreements.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <platform-specific><html><html-template location="component://vforder/template/OrderAgreements.ftl"/></html></platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
	<screen name="ConfirmOrder">
        <section>
            <actions>
                <set field="stepTitleId" value="OrderOrderConfirmation"/>
                <set field="stepLabelId" value="OrderReviewOrder"/>
                <property-to-field resource="order" property="orderPreference.giftEnable" field="giftEnable" default="Y"/>
                <script location="component://order/groovyScripts/entry/CheckoutReview.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonOrderCheckoutDecorator">
                    <decorator-section name="body">
                        <platform-specific>
                            <html><html-template location="component://order/template/entry/order/OrderHeaderInfo.ftl"/></html>
                        </platform-specific>
                        <platform-specific>
                            <html><html-template location="component://order/template/entry/order/OrderPaymentInfo.ftl"/></html>
                        </platform-specific>
                        <platform-specific>
                            <html><html-template location="component://order/template/entry/order/ShipGroupConfirmSummary.ftl"/></html>
                        </platform-specific>
                        <platform-specific>
                            <html><html-template location="component://order/template/entry/order/OrderItems.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                  </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ShippingFindShipping">
        <section>
            <actions>
                <set field="titleProperty" value="ShippingFindShipping"/>
                <set field="headerItem" value="findshippings"/>
                <set field="exampleCtx" from-field="parameters"/>
                <set field="formShippingListName" value="${groovy: return 'ListShippings';}"/>
            
                <!-- asmselect parameters, must be prefixed by asm_ for SetMultipleSelectJs.ftl -->
                <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
            </actions>
            <widgets>
                <decorator-screen name="VforderCommonDecorator" location="${parameters.mainDecoratorLocation}">
                 <decorator-section name="body">
                 	<section>
                   		<widgets>
                   			<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                    				<decorator-section name="menu-bar">
                                        <container style="button-bar"><link target="EditShippingLayer" link-type="layered-modal" text="${uiLabelMap.ShippingNewShipping}" style="buttontext create"/></container>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindShippings" location="component://vforder/widget/VforderForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                        <include-form name="${formShippingListName}" location="component://vforder/widget/VforderForms.xml"/>
                                    </decorator-section>
                            </decorator-screen>
                         </widgets>           
            		</section>
            	</decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="EditShippingLayer">
        <section>
            <actions>
                <property-map resource="VforderUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="titleProperty" value="PageTitleEditShipping"/>
                <set field="tabButtonItem" value="EditShipping"/>
                <set field="shippingId" from-field="parameters.shippingId"/>
                <entity-one entity-name="ShippingHeader" value-field="shipping"/>
            </actions>
            <widgets>
                <include-form name="EditShipping" location="component://vforder/widget/VforderForms.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="EditShipping">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditShipping"/>
                <set field="tabButtonItem" value="EditShipping"/>
                <set field="headerItem" value="findshippings"/>
                <set field="shippingId" from-field="parameters.shippingId"/>
                <entity-one entity-name="ShippingHeader" value-field="shipping"/>
            </actions>
            <widgets>
                <decorator-screen name="VforderCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <include-form name="EditShipping" location="component://vforder/widget/VforderForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>



</screens>